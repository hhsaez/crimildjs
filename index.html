<html>
	<head>
		<title>CrimildJS Demo</title>
        <script data-main="build/crimild" src="lib/require.js"></script>
        <script id="shader-fs" type="x-shader/x-fragment">
        	precision mediump float;
        	
        	void main(void) {
        		gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
        	}
        </script>
        <script id="shader-vs" type="x-shader/x-vertex">
        	attribute vec3 aVertexPosition;
        	
        	uniform mat4 uMVMatrix;
        	uniform mat4 uPMatrix;
        	
        	void main(void) {
        		gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
        	}
        </script>
		<script type="text/javascript">
			function initCrimild(canvasId) {
                require(["crimild"], function(crimild) {
                    var scene = crimild.core.groupNode({
                        name: "scene",
                        nodes: [
                            crimild.core.geometryNode({
                                name: "a cone",
                                primitives: [
                                    crimild.primitives.conePrimitive({
                                        type: crimild.core.primitive.types.LINES,
                                        vertexFormat: crimild.core.vertexFormat()
                                    })
                                ]
                            })
                        ]
                    });

                    scene.renderComponent = crimild.rendering.renderComponent({
                        effects: [
                            crimild.rendering.effect({
                                shaderProgram: crimild.rendering.shaderProgram({
                                    vertexShader: crimild.rendering.shader({
                                        scriptId: "shader-vs"
                                    }),
                                    fragmentShader: crimild.rendering.shader({
                                        scriptId: "shader-fs"
                                    })
                                })
                            })
                        ]
                    });

                    var canvas = document.getElementById(canvasId);
                    crimild.simulation.run({canvas: canvas, scene: scene});
                });
			}
		</script>
	</head>
	<body onload="initCrimild('webGLCanvas');" style="background-color: #000;">
    	<div align="center">
            <h1>Crimild JS Demo</h1>
            <canvas id="webGLCanvas" style="border: none;" width="640" height="480">
    	       Your browser does not support WebGL
            </canvas>
        </div>
	</body>
</html>